const mongoose = require('mongoose');
const { Schema } = mongoose;

const BidSchema = new Schema(
  {
    _bidderRef: {
      type: Schema.Types.ObjectId,
      ref: 'UserModel',
      required: true,
    },
    _jobRef: { type: Schema.Types.ObjectId, ref: 'JobModel', required: true }, //we will use this to reference the job
    state: {
      type: String,
      enum: ['OPEN', 'BOO', 'WIN', 'CANCEL', 'WIN_SEEN', 'CANCEL_SEEN', 'BOO_SEEN'],
      default: 'OPEN',
    },
    isNewBid: { type: Boolean, default: true }, // will be used to highlight unseen bids
    bidAmount: {
      value: { type: Number, required: true },
      currency: {
        type: String,
        enum: ['CAD', 'USD'],
        default: 'CAD',
      },
    }, //dolar amount
    extras: { type: Object },
  },
  { timestamps: true } // createdAt and updatedAt auto  generated by mongoose
);

//no need for index on these . avoid performance slowness
mongoose.model('BidModel', BidSchema);
