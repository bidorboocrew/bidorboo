const mongoose = require('mongoose');
const { Schema } = mongoose;

const BidSchema = new Schema(
  {
    _bidderId: {
      type: Schema.Types.ObjectId,
      ref: 'UserModel',
      required: true
    },
    _job: { type: Schema.Types.ObjectId, ref: 'JobModel', required: true }, //we will use this to reference the job
    state: {
      type: String,
      enum: ['OPEN', 'BOO', 'WIN', 'CANCEL', 'MODIFIED']
    },
    isSeen: { type: Boolean, default: false }, // will be used to highlight unseen bids
    bidAmount: {
      value: { type: Number, required: true },
      currency: {
        type: String,
        enum: ['CAD', 'USD'],
        default: 'CAD'
      }
    }, //dolar amount
    extras: { type: Object, default: null }
  },
  { timestamps: true } // createdAt and updatedAt auto  generated by mongoose
);


//no need for index on these . avoid performance slowness
BidSchema.set('autoIndex', false);

mongoose.model('BidModel', BidSchema);
